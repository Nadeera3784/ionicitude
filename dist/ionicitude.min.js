"use strict";function UnsupportedFeatureError(){var e=Error.apply(this,arguments);e.name=this.name="UnsupportedFeatureError",this.stack=e.stack,e.message?this.message=e.message:this.message="Worls loading error : Your device does not support one or several of it's requested features."}UnsupportedFeatureError.prototype=Object.create(Error.prototype,{constructor:{value:UnsupportedFeatureError,writable:!0,configurable:!0}}),function(){function e(){function e(){return r||(r=cordova.require("com.wikitude.phonegap.WikitudePlugin.WikitudePlugin")),r}var r=void 0;this.get=e}function r(e){function r(){e.get().close()}function t(){e.get().hide()}this.close=r,this.hide=t}function t(e,r,t,o,n){function i(){var o=e.defer();return r.get().isDeviceSupported(function(e){f.deviceSupportsFeatures=!0,o.resolve(e)},function(e){f.deviceSupportsFeatures=!1,o.reject(e)},t.reqFeatures),o.promise}function s(e){function t(){return e&&e.hasOwnProperty("customCallback")&&"function"==typeof e.customCallback}function o(){return!(e&&e.hasOwnProperty("doDeviceCheck")&&e.doDeviceCheck===!1)}if(console.log(e),!p){console.log("init service starting"),p=!0;var n=l;t()&&(n=e.onUrlInvokeCallback),r.get().setOnUrlInvokeCallback(n),o()&&i()}}function u(o){if(o||(o="main"),t.deviceSupportsFeatures){var n=e.defer();return console.log("launch"),r.get().loadARchitectWorld(function(e){n.resolve(e)},function(e){n.reject(e)},c(o),t.reqFeatures,t.worldConfig),n.promise}throw new UnsupportedFeatureError}function a(e){}function c(e){if(!t.worldsFolders.hasOwnProperty(e))throw new SyntaxError("Ionicitude Module : launchAR() : The argument's value ('"+e+"')passed in launchAR doesn't match any property of the worldsFolders setting.");var r="www/"+t.worldsRootFolder,o=t.worldsFolders[e].folder?t.worldsFolders[e].folder:e,n=(t.worldsFolders[e].file?t.worldsFolders[e].file:"index")+".html";return r+"/"+o+"/"+n}function l(e){var r=d(e);try{n[r.funcName](r.parameters)}catch(t){throw t instanceof TypeError?new TypeError(r.funcName+"is either undefined or not a function in the Ionicitude lib service."):t}}function d(e){if(e.substr(0,o.length)===o){var r={},t=e.substr(o.length),n=t.indexOf("?");if(-1===n)r.funcName=t,r.parameters=null;else try{r.funcName=t.substr(0,n);var i=t.substr(n+1);r.parameters=angular.fromJson(i)}catch(s){throw s instanceof SyntaxError?new SyntaxError("parseActionUrl() expects the substring following the '?' in the parameter string to be a valid JSON object. '"+i+"' given."):s}return r}throw new SyntaxError("parseActionUrl() expects first parameter to be a string starting with '"+o+"'.")}var p=!1,f={checkDevice:i,deviceSupportsFeatures:!1,initService:s,launchAR:u,setup:a};return f}r.$inject=["plugin"],t.$inject=["$q","plugin","settings","protocol","lib"],angular.module("IonicitudeModule",[]);var o={worldConfig:{camera_position:"back"},reqFeatures:["geo","2dtracking"],worldsRootFolder:"wikitude-worlds",worldsFolders:{main:{folder:"main",file:"index"}}};angular.module("IonicitudeModule").value("settings",o),angular.module("IonicitudeModule").constant("protocol","architectsdk://"),angular.module("IonicitudeModule").service("plugin",e),angular.module("IonicitudeModule").service("lib",r),angular.module("IonicitudeModule").factory("Ionicitude",t)}();