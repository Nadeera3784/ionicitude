"use strict";function UnsupportedFeatureError(){var e=Error.apply(this,arguments);e.name=this.name="UnsupportedFeatureError",this.stack=e.stack,e.message?this.message=e.message:this.message="AR World loading error : Your device does not support one or several of it's requested features."}UnsupportedFeatureError.prototype=Object.create(Error.prototype,{constructor:{value:UnsupportedFeatureError,writable:!0,configurable:!0}}),function(){function e(e){function t(){return Object.getOwnPropertyNames(g)}function r(e,t){function r(e){if(g.hasOwnProperty(e))throw new SyntaxError("Ionicitude - addAction() - The name '"+e+"' has already been added or is a reserved Ionicitude name.")}if("string"==typeof e||e instanceof String){if(!t)throw new TypeError("Ionicitude - addAction() expects a second argument if first argument is of type 'string'.");if("function"!=typeof t)throw new TypeError("Ionicitude - addAction() expects second argument to only be of type 'function', '"+typeof t+"' given.");r(e),g[e]=t}else{if(!("function"==typeof e||e instanceof Function))throw new TypeError("Ionicitude - addAction() expects first argument to be of type 'string' or 'function', '"+typeof e+"' given");var o=e.name;if(!o)throw new TypeError("Ionicitude - addAction() do not accept anonymous function as first argument. Please, try passing a named function instead.");r(o),g[o]=e}return f}function o(){console.log("checking device");var t=e.defer();return d.isDeviceSupported(function(e){console.log(e),f.deviceSupportsFeatures=!0,t.resolve(e)},function(e){console.log(e),f.deviceSupportsFeatures=!1,t.reject(e)},h.reqFeatures),t.promise}function n(e){function t(){return e&&e.hasOwnProperty("customCallback")&&"function"==typeof e.customCallback}function r(){return!(e&&e.hasOwnProperty("doDeviceCheck")&&e.doDeviceCheck===!1)}if(console.log(e),!l){console.log("init service starting"),l=!0,u();var n=c;t()&&(n=e.customCallback),d.setOnUrlInvokeCallback(n),r()&&o()||console.log("check skipped due to init settings")}return f}function i(t){if(t||(t="main"),f.deviceSupportsFeatures){var r=e.defer();return console.log("launch"),d.loadARchitectWorld(function(e){r.resolve(e)},function(e){r.reject(e)},a(t),h.reqFeatures,h.worldLoadConfig),r.promise}throw new UnsupportedFeatureError}function a(e){return"www/"+h.worldsRootFolder+"/"+e+"/index.html"}function c(e){var t=s(e);if(console.log(e,t),!g.hasOwnProperty(t.funcName)||"function"!=typeof g[t.funcName])throw new TypeError("'"+t.funcName+"' is either undefined or not a function in the Ionicitude service.");g[t.funcName](d,t.parameters)}function s(e){if(e.substr(0,p.length)===p){var t={},r=e.substr(p.length),o=r.indexOf("?");if(-1===o)t.funcName=r,t.parameters=null;else try{t.funcName=r.substr(0,o);var n=r.substr(o+1);t.parameters=angular.fromJson(n)}catch(i){throw i instanceof SyntaxError?new SyntaxError("parseActionUrl() expects the substring following the '?' in the parameter string to be a valid JSON object. '"+n+"' given."):i}return t}throw new SyntaxError("parseActionUrl() expects first parameter to be a string starting with '"+p+"'.")}function u(){d||(d=cordova.require("com.wikitude.phonegap.WikitudePlugin.WikitudePlugin"))}var d,f={checkDevice:o,deviceSupportsFeatures:!1,init:n,launchAR:i,addAction:r,listLibActions:t},l=!1,p="architectsdk://",g={},h={worldLoadConfig:{camera_position:"back"},reqFeatures:["geo","2d_tracking"],worldsRootFolder:"wikitude-worlds"};return f}e.$inject=["$q"],angular.module("IonicitudeModule",[]),angular.module("IonicitudeModule").factory("Ionicitude",e)}();