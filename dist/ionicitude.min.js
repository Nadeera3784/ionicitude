"use strict";function UnsupportedFeatureError(){var e=Error.apply(this,arguments);e.name=this.name="UnsupportedFeatureError",this.stack=e.stack,e.message?this.message=e.message:this.message="Worls loading error : Your device does not support one or several of it's requested features."}UnsupportedFeatureError.prototype=Object.create(Error.prototype,{constructor:{value:UnsupportedFeatureError,writable:!0,configurable:!0}}),function(){function e(){function e(){return t||(t=cordova.require("com.wikitude.phonegap.WikitudePlugin.WikitudePlugin")),t}var t=void 0;this.get=e}function t(e){function t(){e.get().close()}function o(){e.get().hide()}this.close=t,this.hide=o}function o(e,t,o,r,n){function i(){console.log(Object.hasOwnProperty(n))}function c(e,t){if("string"==typeof e||e instanceof String){if(!t)throw new TypeError("Ionicitude - addAction() expects a second argument if first argument is of type 'string'.");if("function"!=typeof t)throw new TypeError("Ionicitude - addAction() expects second argument to only be of type 'function', '"+typeof t+"' given.");n[e]=t}else{if(!("function"==typeof e||e instanceof Function))throw new TypeError("Ionicitude - addAction() expects first argument to be of type 'string' or 'function', '"+typeof e+"' given");var o=e.name;if(!o)throw new TypeError("Ionicitude - addAction() do not accept anonymous function as first argument. Please, try passing a named function instead.");n[o]=e}return h}function u(){console.log("checking device");var r=e.defer();return t.get().isDeviceSupported(function(e){console.log(e),h.deviceSupportsFeatures=!0,r.resolve(e)},function(e){console.log(e),h.deviceSupportsFeatures=!1,r.reject(e)},o.reqFeatures),r.promise}function s(e){function o(){return e&&e.hasOwnProperty("customCallback")&&"function"==typeof e.customCallback}function r(){return!(e&&e.hasOwnProperty("doDeviceCheck")&&e.doDeviceCheck===!1)}if(console.log(e),!g){console.log("init service starting"),g=!0;var n=f;o()&&(n=e.onUrlInvokeCallback),t.get().setOnUrlInvokeCallback(n),r()&&u()||console.log("check skipped due to init settings")}}function a(r){if(r||(r="main"),h.deviceSupportsFeatures){var n=e.defer();return console.log("launch"),t.get().loadARchitectWorld(function(e){n.resolve(e)},function(e){n.reject(e)},d(r),o.reqFeatures,o.worldConfig),n.promise}throw new UnsupportedFeatureError}function l(e){}function d(e){return"www/"+o.worldsRootFolder+"/"+e+"/index.html"}function f(e){var t=p(e);try{n[t.funcName](t.parameters)}catch(o){throw o instanceof TypeError?new TypeError(t.funcName+"is either undefined or not a function in the Ionicitude lib service."):o}}function p(e){if(e.substr(0,r.length)===r){var t={},o=e.substr(r.length),n=o.indexOf("?");if(-1===n)t.funcName=o,t.parameters=null;else try{t.funcName=o.substr(0,n);var i=o.substr(n+1);t.parameters=angular.fromJson(i)}catch(c){throw c instanceof SyntaxError?new SyntaxError("parseActionUrl() expects the substring following the '?' in the parameter string to be a valid JSON object. '"+i+"' given."):c}return t}throw new SyntaxError("parseActionUrl() expects first parameter to be a string starting with '"+r+"'.")}var g=!1,h={checkDevice:u,deviceSupportsFeatures:"pouet",init:s,launchAR:a,setup:l,addAction:c,listLibActions:i};return h}t.$inject=["plugin"],o.$inject=["$q","plugin","settings","protocol","lib"],angular.module("IonicitudeModule",[]);var r={worldConfig:{camera_position:"back"},reqFeatures:["geo","2dtracking"],worldsRootFolder:"wikitude-worlds",worldsFolders:{main:{folder:"main",file:"index"}}};angular.module("IonicitudeModule").value("settings",r),angular.module("IonicitudeModule").constant("protocol","architectsdk://"),angular.module("IonicitudeModule").service("plugin",e),angular.module("IonicitudeModule").service("lib",t),angular.module("IonicitudeModule").factory("Ionicitude",o)}();